{% extends 'eventos/base.html' %}

{% block title %}Mi Perfil{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-4">
        <div class="card shadow">
            <div class="card-body text-center">
                <i class="bi bi-person-circle display-1 text-primary"></i>
                <h3 class="mt-3">{{ user.get_full_name|default:user.username }}</h3>
                <p class="text-muted">@{{ user.username }}</p>
                <span class="badge bg-primary fs-6">{{ user.perfil.get_rol_display }}</span>
                <hr>
                <p><i class="bi bi-envelope"></i> {{ user.email }}</p>
                {% if user.perfil.telefono %}
                <p><i class="bi bi-phone"></i> {{ user.perfil.telefono }}</p>
                {% endif %}
                <p class="text-muted small">
                    Miembro desde {{ user.date_joined|date:"F Y" }}
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-8">
        <div class="card shadow mb-4">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="bi bi-bar-chart"></i> Estadísticas</h4>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-4">
                        <div class="card bg-light">
                            <div class="card-body">
                                <i class="bi bi-calendar-check display-4 text-success"></i>
                                <h2>{{ user.eventos_inscritos.count }}</h2>
                                <p class="text-muted">Eventos Inscritos</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card bg-light">
                            <div class="card-body">
                                <i class="bi bi-calendar-plus display-4 text-primary"></i>
                                <h2>{{ user.eventos_creados.count }}</h2>
                                <p class="text-muted">Eventos Creados</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card bg-light">
                            <div class="card-body">
                                <i class="bi bi-award display-4 text-warning"></i>
                                <h2>{{ user.user_permissions.count }}</h2>
                                <p class="text-muted">Permisos</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card shadow">
            <div class="card-header bg-info text-white">
                <h4 class="mb-0"><i class="bi bi-shield-check"></i> Permisos y Capacidades</h4>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    {% if user.perfil.rol == 'administrador' %}
                    <li class="list-group-item">
                        <i class="bi bi-check-circle text-success"></i> Crear eventos
                    </li>
                    <li class="list-group-item">
                        <i class="bi bi-check-circle text-success"></i> Editar todos los eventos
                    </li>
                    <li class="list-group-item">
                        <i class="bi bi-check-circle text-success"></i> Eliminar eventos
                    </li>
                    <li class="list-group-item">
                        <i class="bi bi-check-circle text-success"></i> Ver eventos privados
                    </li>
                    <li class="list-group-item">
                        <i class="bi bi-check-circle text-success"></i> Acceso al panel de administración
                    </li>
                    {% elif user.perfil.rol == 'organizador' %}
                    <li class="list-group-item">
                        <i class="bi bi-check-circle text-success"></i> Crear eventos
                    </li>
                    <li class="list-group-item">
                        <i class="bi bi-check-circle text-success"></i> Editar tus eventos
                    </li>
                    <li class="list-group-item">
                        <i class="bi bi-x-circle text-danger"></i> Eliminar eventos
                    </li>
                    <li class="list-group-item">
                        <i class="bi bi-check-circle text-success"></i> Gestionar participantes
                    </li>
                    {% else %}
                    <li class="list-group-item">
                        <i class="bi bi-check-circle text-success"></i> Ver eventos públicos
                    </li>
                    <li class="list-group-item">
                        <i class="bi bi-check-circle text-success"></i> Inscribirse en eventos
                    </li>
                    <li class="list-group-item">
                        <i class="bi bi-x-circle text-danger"></i> Crear eventos
                    </li>
                    <li class="list-group-item">
                        <i class="bi bi-x-circle text-danger"></i> Editar eventos
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}